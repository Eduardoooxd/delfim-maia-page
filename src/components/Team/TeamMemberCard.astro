---
import { getLangFromUrl } from "@/i18n/utils";
import { TEAM_MEMBER_BACKGROUNDS_COLORS, cn } from "@/lib/utils";
import type { TeamMember } from "@/types/TeamMember";
import { Image } from "astro:assets";

type Props = TeamMember & {
  className?: string;
  teamMemberIndex: number;
};

const lang = getLangFromUrl(Astro.url);

const {
  teamMemberId,
  name,
  roleEn,
  rolePt,
  image,
  className,
  teamMemberIndex,
} = Astro.props;

const { cardBackground, hoverCardBackground } =
  TEAM_MEMBER_BACKGROUNDS_COLORS[
    teamMemberIndex % TEAM_MEMBER_BACKGROUNDS_COLORS.length
  ];

const invertString = (str: string) => {
  return str.split("").reverse().join("");
};
---

<a
  class={cn(
    "block w-full transition-colors ease-in-out duration-300 h-[36rem] p-4 relative",
    cardBackground,
    hoverCardBackground,
    className,
  )}
  href={`/${lang}/team/${teamMemberId}`}
>
  <div
    class="absolute left-2 bottom-4 [writing-mode:vertical-rl] tracking-wider -rotate-180"
  >
    <h6 class="text-lg font-bold">{name}</h6>
    <p class="text-sm font-bold">{lang === "en" ? roleEn : rolePt}</p>
  </div>

  <div class="absolute right-4 bottom-0 h-[95%]">
    <Image class="max-h-full" width={300} height={520} alt={name} src={image} />
  </div>
</a>
