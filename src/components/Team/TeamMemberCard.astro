---
import { getLangFromUrl } from "@/i18n/utils";
import { TEAM_MEMBER_BACKGROUNDS_COLORS, cn, getSizeClass } from "@/lib/utils";
import type { TeamMember } from "@/types/TeamMember";

type Props = TeamMember & {
  className?: string;
  teamMemberIndex: number;
};

const lang = getLangFromUrl(Astro.url);

const {
  teamMemberId,
  name,
  roleEn,
  rolePt,
  cardImage,
  className,
  teamMemberIndex,
  cardSize,
} = Astro.props;

const { cardBackground, hoverCardBackground } =
  TEAM_MEMBER_BACKGROUNDS_COLORS[
    teamMemberIndex % TEAM_MEMBER_BACKGROUNDS_COLORS.length
  ];

const cardSizeClassname = getSizeClass(cardSize);
---

<a
  class={cn(
    "block transition-colors ease-in-out duration-300 h-[26rem] p-4 relative group",
    cardBackground,
    hoverCardBackground,
    cardSizeClassname,
    className,
  )}
  href={`/${lang}/team/${teamMemberId}`}
>
  <div
    class={cn(
      "absolute left-1 bottom-4 [writing-mode:vertical-rl] tracking-wider -rotate-180 z-30 transition-colors ease-in-out duration-300",
    )}
  >
    <h6 class="text-lg font-bold">{name}</h6>
    <p class="text-sm font-bold">{lang === "en" ? roleEn : rolePt}</p>
  </div>

  <div class="absolute right-1 bottom-0">
    <img
      class="max-w-full h-auto"
      width="100%"
      height={400}
      alt={name}
      src={cardImage}
    />
  </div>
</a>
