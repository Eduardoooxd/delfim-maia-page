---
import { Image } from "astro:assets";
import { cn } from "@/lib/utils";
import type { TeamMember } from "./TeamMember";
import { getLangFromUrl } from "@/i18n/utils";

const BACKGROUNDS_COLORS: {
  imageBackground: string;
  textBackground: string;
  hoverImageBackground: string;
}[] = [
  {
    imageBackground: "bg-[#d9d9d9]",
    textBackground: "bg-[#4b3f3f]",
    hoverImageBackground: "hover:bg-[#898989]",
  },
  {
    imageBackground: "bg-[#697a7f]",
    textBackground: "bg-[#697a7f]",
    hoverImageBackground: "hover:bg-[#525f63]",
  },
  {
    imageBackground: "bg-[#a9afbb]",
    textBackground: "bg-[#a9afbb]",
    hoverImageBackground: "hover:bg-[#93979e]",
  },
  {
    imageBackground: "bg-[#bd9084]",
    textBackground: "bg-[#bd9084]",
    hoverImageBackground: "hover:bg-[#c17763]",
  },
  {
    imageBackground: "bg-[#b1ced1]",
    textBackground: "bg-[#697a7f]",
    hoverImageBackground: "hover:bg-[#84cad1]",
  },
  {
    imageBackground: "bg-[#ebcfbd]",
    textBackground: "bg-[#ebcfbd]",
    hoverImageBackground: "hover:bg-[#e19767]",
  },
  {
    imageBackground: "bg-[#cbaabd]",
    textBackground: "bg-[#cbaabd]",
    hoverImageBackground: "hover:bg-[#c979a7]",
  },
  {
    imageBackground: "bg-[#b3c1b6]",
    textBackground: "bg-[#b3c1b6]",
    hoverImageBackground: "hover:bg-[#89ba94]",
  },
  {
    imageBackground: "bg-[#cccfff]",
    textBackground: "bg-[#cccfff]",
    hoverImageBackground: "hover:bg-[#8990ff]",
  },
  {
    imageBackground: "bg-[#d5a38f]",
    textBackground: "bg-[#d5a38f]",
    hoverImageBackground: "hover:bg-[#ce8163]",
  },
  {
    imageBackground: "bg-[#dfdaa9]",
    textBackground: "bg-[#dfdaa9]",
    hoverImageBackground: "hover:bg-[#d7cd6c]",
  },
  {
    imageBackground: "bg-[#c67f78]",
    textBackground: "bg-[#bd9084]",
    hoverImageBackground: "hover:bg-[#c26157]",
  },
];

type Props = TeamMember & {
  className?: string;
  teamMemberIndex: number;
};

const lang = getLangFromUrl(Astro.url);

const { name, roleEn, rolePt, image, className, teamMemberIndex } = Astro.props;

const { imageBackground, textBackground, hoverImageBackground } =
  BACKGROUNDS_COLORS[teamMemberIndex % BACKGROUNDS_COLORS.length];
---

<a
  class={cn(
    "block relative w-full transition-colors ease-in-out duration-300",
    imageBackground,
    hoverImageBackground,
    className,
  )}
  href=""
>
  <Image width={720} height={1080} alt="" class="h-auto w-full" src={image} />
  <div
    class={cn(
      "absolute bottom-5 right-0 text-white py-2 min-w-[50%] flex justify-end",
      textBackground,
    )}
  >
    <div
      class={cn(
        "text-sm w-fit text-right capitalize font-semibold text-shadow-sm shadow-slate-600",
      )}
    >
      <h6 class="text-sm border-b pr-2">
        {name}
      </h6>
      <hr />

      <p class="text-sm px-2">{lang === "en" ? roleEn : rolePt}</p>
    </div>
  </div>
</a>
